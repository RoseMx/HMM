<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Cat√°logo con Carrito</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>

  <!-- √çcono de carrito -->
  <div id="cart-icon">üõí <span id="cart-count">0</span></div>

  <!-- Tarjetas de cat√°logo -->
  <div class="cat-card" data-modelo="Francfort" data-img="https://dummyimage.com/300x200/59a899/fff.png&text=Francfort" data-precio="$1,000 MXN" data-desc="Cl√≥set compacto, nogal.">
    <div class="cat-img" style="background-image:url('https://dummyimage.com/300x200/59a899/fff.png&text=Francfort');"></div>
    <div>Francfort</div>
    <div>$1,000 MXN</div>
  </div>
  <div class="cat-card" data-modelo="Hanover" data-img="https://dummyimage.com/300x200/25d366/fff.png&text=Hanover" data-precio="$1,000 MXN" data-desc="Librero moderno.">
    <div class="cat-img" style="background-image:url('https://dummyimage.com/300x200/25d366/fff.png&text=Hanover');"></div>
    <div>Hanover</div>
    <div>$1,000 MXN</div>
  </div>

  <!-- Modal individual -->
  <div id="modal" class="modal">
    <div class="modal-content">
      <span id="close" class="close">&times;</span>
      <img id="modalImg" src="" alt="Mueble">
      <h2 id="modalTitle"></h2>
      <div id="modalPrice"></div>
      <p id="modalDesc"></p>
      <button id="addToCart" class="modal-btn">Agregar al carrito</button>
    </div>
  </div>

  <!-- Modal del carrito -->
  <div id="cart-modal" class="modal">
    <div class="modal-content cart-content">
      <span id="closeCart" class="close">&times;</span>
      <h2>Carrito de compras</h2>
      <ul id="cart-items"></ul>
      <a id="sendCart" class="modal-btn" href="#" target="_blank">Enviar por WhatsApp</a>
    </div>
  </div>

  <script>
    const modal = document.getElementById('modal');
    const cartModal = document.getElementById('cart-modal');
    const cartItems = [];

    document.querySelectorAll('.cat-card').forEach(card => {
      card.onclick = () => {
        modal.classList.add('open');
        modal.dataset.modelo = card.dataset.modelo;
        document.getElementById('modalImg').src = card.dataset.img;
        document.getElementById('modalTitle').textContent = card.dataset.modelo;
        document.getElementById('modalPrice').textContent = card.dataset.precio;
        document.getElementById('modalDesc').textContent = card.dataset.desc;
      }
    });

    document.getElementById('close').onclick = () => modal.classList.remove('open');
    document.getElementById('modal').onclick = (e) => { if (e.target === modal) modal.classList.remove('open'); }

    // Agregar al carrito
    document.getElementById('addToCart').onclick = () => {
      const modelo = document.getElementById('modalTitle').textContent;
      const id = Date.now();
      cartItems.push({ id, modelo, modificar: false });
      updateCartUI();
      modal.classList.remove('open');
    };

    function updateCartUI() {
      const ul = document.getElementById('cart-items');
      ul.innerHTML = '';
      cartItems.forEach(item => {
        const li = document.createElement('li');
        li.innerHTML = `
          <label><input type="checkbox" onchange="toggleMod(${item.id})"> Quiero modificar: <strong>${item.modelo}</strong></label>
          <button onclick="removeItem(${item.id})">‚ùå</button>
        `;
        ul.appendChild(li);
      });
      document.getElementById('cart-count').textContent = cartItems.length;
    }

    function removeItem(id) {
      const index = cartItems.findIndex(i => i.id === id);
      if (index !== -1) cartItems.splice(index, 1);
      updateCartUI();
    }

    function toggleMod(id) {
      const item = cartItems.find(i => i.id === id);
      if (item) item.modificar = !item.modificar;
    }

    document.getElementById('cart-icon').onclick = () => cartModal.classList.add('open');
    document.getElementById('closeCart').onclick = () => cartModal.classList.remove('open');
    document.getElementById('cart-modal').onclick = (e) => { if (e.target === cartModal) cartModal.classList.remove('open'); }

    document.getElementById('sendCart').onclick = function(e) {
      if (cartItems.length === 0) return;
      let mensaje = 'Hola! Me interesan los siguientes modelos:%0A';
      cartItems.forEach(i => {
        mensaje += `- ${i.modelo}${i.modificar ? ' (con modificaciones)' : ''}%0A`;
      });
      this.href = `https://wa.me/526624125786?text=${mensaje}`;
    };
  </script>
</body>
</html>
